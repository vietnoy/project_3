{
    "id": 62551,
    "kind": "MARKDOWN",
    "auditfirm_id": 16,
    "impact": "MEDIUM",
    "finders_count": 1,
    "protocol_id": 3420,
    "title": "[M-07] Non-compliance with EIP-721 in `tokenURI()` function",
    "content": "\n_Resolved_\n\n## Severity\n\n**Impact:** Low\n\n**Likelihood:** High\n\n## Description\n\nSimilar Finding: [Link](https://solodit.cyfrin.io/issues/dropboxtokenuri-returns-data-for-non-existent-tokenid-violating-eip721-cyfrin-none-earnm-dropbox-markdown)\n\nThe `tokenURI` function in the`RipFunPacks` contract does not strictly adhere to the EIP-721 standard. \n\n```solidity\n    function tokenURI(uint256 tokenId) public view override returns (string memory) {\n        return _packetUris[tokenId];\n    }\n```\n\nAccording to the [EIP-721 specification](https://eips.ethereum.org/EIPS/eip-721), the function should throw an error if the provided _tokenId does not correspond to a valid NFT.\n\n```solidity\n    /// @notice A distinct Uniform Resource Identifier (URI) for a given asset.\n    /// @dev Throws if `_tokenId` is not a valid NFT. URIs are defined in RFC\n    ///  3986. The URI may point to a JSON file that conforms to the \"ERC721\n    ///  Metadata JSON Schema\".\n    function tokenURI(uint256 _tokenId) external view returns (string);\n```\n\nHowever, the current implementation simply returns an empty string for non-existent tokenId values. This behavior can lead to confusion and makes it difficult for clients and applications to determine the validity of a token.\n\nNote: this is the same for `Card` contract.\n\n```solidity\n    /**\n     * @dev Returns the metadata URI for a given card\n     * @param tokenId ID of the card\n     * @return Metadata URI for the card\n     */\n    function tokenURI(uint256 tokenId) public view override returns (string memory) {\n        return _cardUris[tokenId];\n    }\n```\n\n## Recommendations\n\nTo ensure compliance with the EIP-721 standard, modify the `tokenURI` function to revert when an invalid `tokenId` is provided. \n\n\n\n",
    "summary": "\nThe `tokenURI` function in the `RipFunPacks` and `Card` contracts does not follow the EIP-721 standard. Instead of throwing an error when an invalid `tokenId` is provided, the function returns an empty string. This can cause confusion and make it difficult for clients and applications to determine the validity of a token. To fix this issue, the function should be modified to revert when an invalid `tokenId` is provided.",
    "report_date": "2025-09-11T00:00:00.000Z",
    "contest_prize_txt": "",
    "contest_link": "",
    "sponsor_name": null,
    "sponsor_link": "",
    "quality_score": 0,
    "general_score": 0,
    "source_link": "https://github.com/pashov/audits/blob/master/team/md/RipIt-security-review_2025-04-25.md",
    "github_link": "",
    "pdf_link": "",
    "pdf_page_from": 0,
    "contest_id": "",
    "slug": "m-07-non-compliance-with-eip-721-in-tokenuri-function-pashov-audit-group-none-ripit_2025-04-25-markdown",
    "firm_name": "Pashov Audit Group",
    "firm_logo_square": "Pashov_square.png",
    "protocol_name": "RipIt_2025-04-25",
    "bookmarked": false,
    "read": false,
    "issues_issue_finders": [
        {
            "wardens_warden": {
                "handle": "Pashov Audit Group"
            }
        }
    ],
    "auditfirms_auditfirm": {
        "name": "Pashov Audit Group",
        "logo_square": "Pashov_square.png"
    },
    "protocols_protocol": {
        "name": "RipIt_2025-04-25",
        "protocols_protocolcategoryscore": []
    },
    "issues_issuetagscore": []
}