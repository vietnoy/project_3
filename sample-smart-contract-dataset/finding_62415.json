{
    "id": 62415,
    "kind": "MARKDOWN",
    "auditfirm_id": 34,
    "impact": "MEDIUM",
    "finders_count": 1,
    "protocol_id": 1826,
    "title": "[EIGEN2-4] Missing constraint check for modification of lookahead time of slashable quorum",
    "content": "**Severity:** Medium\n\n**Path:** StakeRegistry.sol:_setLookAheadPeriod#L794-L802\n\n**Description:** The StakeRegistry exposes the external function `setLookAheadPeriod`, which calls the internal variant and allows the CoordinatorOwner to set the lookahead time for a slashable quorum directly.\n\nHowever, this modifying function is missing the constraint check that exists in `SlashingRegistryCoordinator.sol:_createQuorum`:\n```\nrequire(\n    AllocationManager(address(allocationManager)).DEALLOCATION_DELAY() > lookAheadPeriod,\n    LookAheadPeriodTooLong()\n);\n```\nAs a result, the CoordinatorOwner can set a look ahead period time that is greater than the deallocation delay of the AllocationManager, which would allow for voting power to be used that cannot be slashed, breaking the governance invariant. \n```\n    function _setLookAheadPeriod(uint8 quorumNumber, uint32 _lookAheadBlocks) internal {\n        require(\n            stakeTypePerQuorum[quorumNumber] == IStakeRegistryTypes.StakeType.TOTAL_SLASHABLE,\n            QuorumNotSlashable()\n        );\n        uint32 oldLookAheadDays = slashableStakeLookAheadPerQuorum[quorumNumber];\n        slashableStakeLookAheadPerQuorum[quorumNumber] = _lookAheadBlocks;\n        emit LookAheadPeriodChanged(oldLookAheadDays, _lookAheadBlocks);\n    }\n```\n\n**Remediation:**  The function `_setLookAheadPeriod` should include the same constraint check as when creating the quorum.\n\n**Status:**  Fixed\n\n\n- - -",
    "summary": "\nThis bug report discusses an issue with the StakeRegistry contract, specifically with the `setLookAheadPeriod` function. This function allows the CoordinatorOwner to set the lookahead time for a slashable quorum. However, the function is missing a constraint check that exists in another function, which could lead to a violation of the governance rules. The recommended solution is to add the same constraint check to the `setLookAheadPeriod` function. This issue has been fixed. ",
    "report_date": "2025-04-22T00:00:00.000Z",
    "contest_prize_txt": "",
    "contest_link": "",
    "sponsor_name": null,
    "sponsor_link": "",
    "quality_score": 0,
    "general_score": 0,
    "source_link": "https://github.com/solodit/solodit_content/blob/main/reports/Hexens/2025-04-22-EigenLayer.md",
    "github_link": "",
    "pdf_link": "",
    "pdf_page_from": 0,
    "contest_id": "",
    "slug": "eigen2-4-missing-constraint-check-for-modification-of-lookahead-time-of-slashable-quorum-hexens-none-eigenlayer-markdown",
    "firm_name": "Hexens",
    "firm_logo_square": "Hexens_square.png",
    "protocol_name": "Eigenlayer",
    "bookmarked": false,
    "read": false,
    "issues_issue_finders": [
        {
            "wardens_warden": {
                "handle": "Hexens"
            }
        }
    ],
    "auditfirms_auditfirm": {
        "name": "Hexens",
        "logo_square": "Hexens_square.png"
    },
    "protocols_protocol": {
        "name": "Eigenlayer",
        "protocols_protocolcategoryscore": []
    },
    "issues_issuetagscore": []
}