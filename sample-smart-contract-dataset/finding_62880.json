{
    "id": 62880,
    "kind": "MARKDOWN",
    "auditfirm_id": 30,
    "impact": "LOW",
    "finders_count": 1,
    "protocol_id": 3455,
    "title": "[L-03] Missing Event Emission in `setBaseURI()` Function",
    "content": "\n## Severity\n\nLow Risk\n\n## Description\n\nThe `setBaseURI()` function in the `MonsterNFT` contract updates the base URI for token metadata, but does not emit any event to notify marketplaces and indexers about the metadata update. This violates the https://eips.ethereum.org/EIPS/eip-4906 standard which expects a `BatchMetadataUpdate` event to be emitted when metadata is updated, as also expected by marketplaces like [OpenSea](https://docs.opensea.io/docs/metadata-standards#metadata-updates).\n\n## Location of Affected Code\n\nFile: [src/MonsterNFT.sol#L186-L188](https://github.com/SlothFi/nft-contract/blob/94226da94ef06ceeec906844e5b261b7934ee34a/src/MonsterNFT.sol#L186-L188)\n\n```solidity\nfunction setBaseURI(string calldata uri) external onlyRole(MANAGER_ROLE) {\n    _baseTokenURI = uri;\n}\n```\n\n## Impact\n\nThe missing event emission causes marketplaces and indexers to miss metadata updates, resulting in outdated token metadata being displayed to users, reduced marketplace compatibility, and poor user experience where base URI changes won't be reflected in token listings.\n\n## Recommendation\n\nAdd the `BatchMetadataUpdate` event emission following EIP-4906 standard:\n\n```solidity\nevent BatchMetadataUpdate(uint256 _fromTokenId, uint256 _toTokenId);\n\nfunction setBaseURI(string calldata uri) external onlyRole(MANAGER_ROLE) {\n    _baseTokenURI = uri;\n    emit BatchMetadataUpdate(1, _nextTokenId - 1);\n}\n```\n\nThis ensures compatibility with marketplace expectations and proper metadata update detection for all existing tokens.\n\n## Team Response\n\nFixed.\n\n",
    "summary": "",
    "report_date": "2025-10-09T00:00:00.000Z",
    "contest_prize_txt": "",
    "contest_link": "",
    "sponsor_name": null,
    "sponsor_link": "",
    "quality_score": 0,
    "general_score": 0,
    "source_link": "https://github.com/shieldify-security/audits-portfolio-md/blob/main/Spellborne-Security-Review.md",
    "github_link": "",
    "pdf_link": "",
    "pdf_page_from": 0,
    "contest_id": "",
    "slug": "l-03-missing-event-emission-in-setbaseuri-function-shieldify-none-spellborne-markdown",
    "firm_name": "Shieldify",
    "firm_logo_square": "Shieldify_square.png",
    "protocol_name": "Spellborne",
    "bookmarked": false,
    "read": false,
    "issues_issue_finders": [
        {
            "wardens_warden": {
                "handle": "Shieldify Security"
            }
        }
    ],
    "auditfirms_auditfirm": {
        "name": "Shieldify",
        "logo_square": "Shieldify_square.png"
    },
    "protocols_protocol": {
        "name": "Spellborne",
        "protocols_protocolcategoryscore": []
    },
    "issues_issuetagscore": []
}