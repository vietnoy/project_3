{
    "id": 62187,
    "kind": "MARKDOWN",
    "auditfirm_id": 16,
    "impact": "HIGH",
    "finders_count": 1,
    "protocol_id": 2031,
    "title": "[H-01] `transferFee()` uses an incorrect transfer method",
    "content": "\n_Resolved_\n\n\r\n## Severity\r\n\r\n**Impact:** Medium\r\n\r\n**Likelihood:** High\r\n\r\n## Description\r\n\r\nThe `transferFee` function in the `TheCounter` contract incorrectly uses `safeTransferFrom` instead of `safeTransfer` when transferring collected fees from the contract to the admin. This implementation error will cause the function to revert due to missing allowances.\r\n\r\nAs a result, the admin is unable to collect protocol fees.\r\n\r\n```solidity\r\n    function transferFee() external onlyRole(DEFAULT_ADMIN_ROLE) {\r\n        ...\r\n        token.safeTransferFrom(address(this), msg.sender, feeToTransfer); // @audit should use safeTransfer\r\n        ...\r\n    }\r\n```\r\n\r\n## Recommendations\r\n\r\n```diff\r\n    function transferFee() external onlyRole(DEFAULT_ADMIN_ROLE) {\r\n        ...\r\n-        token.safeTransferFrom(address(this), msg.sender, feeToTransfer);\r\n+        token.safeTransfer(msg.sender, feeToTransfer);\r\n        ...\r\n    }\r\n\r\n```\n\n\n\n",
    "summary": "\nThis bug report is about a medium severity bug that has been resolved. The bug affects the `TheCounter` contract and causes the `transferFee` function to fail. This is because the function incorrectly uses `safeTransferFrom` instead of `safeTransfer` when transferring fees to the admin. This results in the admin being unable to collect fees. The report recommends changing the code to use `safeTransfer` instead of `safeTransferFrom` to fix the bug.",
    "report_date": "2025-08-27T00:00:00.000Z",
    "contest_prize_txt": "",
    "contest_link": "",
    "sponsor_name": null,
    "sponsor_link": "",
    "quality_score": 0,
    "general_score": 0,
    "source_link": "https://github.com/pashov/audits/blob/master/team/md/Resolv-security-review_2024-12-09.md",
    "github_link": "",
    "pdf_link": "",
    "pdf_page_from": 0,
    "contest_id": "",
    "slug": "h-01-transferfee-uses-an-incorrect-transfer-method-pashov-audit-group-none-resolv_2024-12-09-markdown_",
    "firm_name": "Pashov Audit Group",
    "firm_logo_square": "Pashov_square.png",
    "protocol_name": "Resolv_2024-12-09",
    "bookmarked": false,
    "read": false,
    "issues_issue_finders": [
        {
            "wardens_warden": {
                "handle": "Pashov Audit Group"
            }
        }
    ],
    "auditfirms_auditfirm": {
        "name": "Pashov Audit Group",
        "logo_square": "Pashov_square.png"
    },
    "protocols_protocol": {
        "name": "Resolv_2024-12-09",
        "protocols_protocolcategoryscore": []
    },
    "issues_issuetagscore": []
}