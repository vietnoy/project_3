{
    "id": 62159,
    "kind": "PDF",
    "auditfirm_id": 6,
    "impact": "LOW",
    "finders_count": 4,
    "protocol_id": 3384,
    "title": "Matching amounts",
    "content": "## Severity: Low Risk\n\n## Context\nProcessMergeUtils.sol#L47-L53\n\n## Description/Recommendation\nDue to how rounding directions behave, it would make more sense for certain quantities that need to match on both sides and cancel each other to just use the negation of one calculation. For this context, for example, it would be best to not use the opposite trade and instead perform:\n\n```plaintext\nuser.signedSize += trade.signedSize();\ncounter.signedSize -= trade.signedSize();\nint256 paymentUser = -trade.toUpfrontFixedCost(market.timeToMat);\nint256 paymentCounter = -paymentUser;\n```\n\nThis would guarantee the following invariant for two mirrored parameters:\n\n```\nX + Xop = 0\n```\n\n## Responses\n**Pendle Finance:** Acknowledged, though we won't fix. Rounding error of 1 wei (18 decimals) is too small.  \n**Spearbit:** Acknowledged.\n\n## Footnote\nThe above suggestion applies to many other places where:\n- User and counter\n- Winner of force deleverage and the loser\n- ...",
    "summary": "",
    "report_date": "2025-08-22T00:00:00.000Z",
    "contest_prize_txt": "",
    "contest_link": "https://github.com/spearbit/portfolio/blob/master/pdfs/Pendle-Spearbit-Security-Review-August-2025.pdf",
    "sponsor_name": null,
    "sponsor_link": "",
    "quality_score": 0,
    "general_score": 0,
    "source_link": "https://github.com/spearbit/portfolio/blob/master/pdfs/Pendle-Spearbit-Security-Review-August-2025.pdf",
    "github_link": "",
    "pdf_link": "https://solodit-bucket.s3.amazonaws.com/storage/reports/spearbit/Pendle-Spearbit-Security-Review-August-2025.pdf",
    "pdf_page_from": 41,
    "contest_id": "",
    "slug": "matching-amounts-spearbit-none-pendle-core-v3-pdf",
    "firm_name": "Spearbit",
    "firm_logo_square": "spearbit_square.png",
    "protocol_name": "Pendle Core v3",
    "bookmarked": false,
    "read": false,
    "issues_issue_finders": [
        {
            "wardens_warden": {
                "handle": "Saw-mon and Natalie"
            }
        },
        {
            "wardens_warden": {
                "handle": "Ethan"
            }
        },
        {
            "wardens_warden": {
                "handle": "Desmond Ho"
            }
        },
        {
            "wardens_warden": {
                "handle": "RustyRabbit"
            }
        }
    ],
    "auditfirms_auditfirm": {
        "name": "Spearbit",
        "logo_square": "spearbit_square.png"
    },
    "protocols_protocol": {
        "name": "Pendle Core v3",
        "protocols_protocolcategoryscore": []
    },
    "issues_issuetagscore": []
}