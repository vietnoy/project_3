{
    "id": 62283,
    "kind": "PDF",
    "auditfirm_id": 6,
    "impact": "MEDIUM",
    "finders_count": 3,
    "protocol_id": 3396,
    "title": "Rounding directions",
    "content": "## Severity: Medium Risk\n\n## Context\n- `GenericLogic.sol#L236-L242`\n- `MiniPoolGenericLogic.sol#L202-L209`\n\n## Description/Recommendation\n- **GenericLogic.sol#L236-L242, MiniPoolGenericLogic.sol#L202-L209**: Make sure all operations round-up when calculating totalDebtInETH.\n- **AToken.sol#L184-L185**: Best to round-up amountScaled.\n- **ValidationLogic.sol#L205-L212, MiniPoolValidationLogic.sol#L208-L214**: It would be best to round up the `vars.amountOfCollateralNeededETH` or instead check:\n  ```\n  vars.userBorrowBalanceETH + validateParams.amountInETH <= (vars.userCollateralBalanceETH).percentMul(vars.currentLtv)\n  ```\n\n## Acknowledgements\n- **Astera**: Fixed in commit `1ee6d04b`.\n- **Spearbit**: All the above except `AToken.sol#L184-L185` have been fixed in commit `1ee6d04b`. `AToken.sol#L184-L185` has been acknowledged.",
    "summary": "\nThe report states that there is a medium risk bug in the code related to calculating totalDebtInETH in the files GenericLogic.sol and MiniPoolGenericLogic.sol. It is recommended to make sure all operations round up when calculating this value. Additionally, in the file AToken.sol, it is best to round up the amountScaled. In ValidationLogic.sol and MiniPoolValidationLogic.sol, it is suggested to either round up the vars.amountOfCollateralNeededETH or check the equation provided. The bug has been fixed in a commit by Astera, except for the issue in AToken.sol which has been acknowledged.",
    "report_date": "2025-08-29T00:00:00.000Z",
    "contest_prize_txt": "",
    "contest_link": "https://github.com/spearbit/portfolio/blob/master/pdfs/Astera-Spearbit-Security-Review-December-2024.pdf",
    "sponsor_name": null,
    "sponsor_link": "",
    "quality_score": 0,
    "general_score": 0,
    "source_link": "https://github.com/spearbit/portfolio/blob/master/pdfs/Astera-Spearbit-Security-Review-December-2024.pdf",
    "github_link": "",
    "pdf_link": "https://solodit-bucket.s3.amazonaws.com/storage/reports/spearbit/Astera-Spearbit-Security-Review-December-2024.pdf",
    "pdf_page_from": 17,
    "contest_id": "",
    "slug": "rounding-directions-spearbit-none-astera-pdf",
    "firm_name": "Spearbit",
    "firm_logo_square": "spearbit_square.png",
    "protocol_name": "Astera",
    "bookmarked": false,
    "read": false,
    "issues_issue_finders": [
        {
            "wardens_warden": {
                "handle": "Saw-mon and Natalie"
            }
        },
        {
            "wardens_warden": {
                "handle": "Cergyk"
            }
        },
        {
            "wardens_warden": {
                "handle": "Jonatas Martins"
            }
        }
    ],
    "auditfirms_auditfirm": {
        "name": "Spearbit",
        "logo_square": "spearbit_square.png"
    },
    "protocols_protocol": {
        "name": "Astera",
        "protocols_protocolcategoryscore": []
    },
    "issues_issuetagscore": []
}